#!/usr/bin/python

import sys
import urllib

path = 'http://football.iernst.net/manage/quick_pick?'
def add_pick(entryname, teamname):
    if teamname == 'No Pick':
        print 'Skipping NO PICK for %r' % entryname
        return
    args = {
        'entry': urllib.quote_plus(entryname),
        'team': teamname,
    }
    url = path + '&'.join('%s=%s' % a for a in args.iteritems())
    print 'opening: %s' % url
    req = urllib.urlopen(url)
    if req.getcode() != 200:
        raise Exception('Error adding pick for %r' % entryname)

picks = open(sys.argv[1], 'r')

for line in picks:
    print 'Parsing line: %s' % line.strip()
    parts = line.split(',')
    add_pick(parts[0].strip(), parts[1].strip())

